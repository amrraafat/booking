@model List<PackageViewModel>
@{
    ViewData["Title"] = "Package";
    var currentCulture = ViewBag.currentCulture;
}
<div class="mb-3">
    <a href="@Url.Action("Create", "Packages")" class="btn btn-success">@Localizer["lbbtCreateNewPackage"]</a>
</div>
<div class="table-responsive">
    <table id="tableRole" class="table table-striped">
        <thead class="thead-dark">
            <tr>
                <th>@Localizer["lbPackageName"]</th>
                <th>@Localizer["lbStartDate"]</th>
                <th>@Localizer["lbEndDate"]</th>
                <th>@Localizer["lbAdultPrice"]</th>
                <th>@Localizer["lbKidPrice"]</th>
                <th>@Localizer["lbHotelName"]</th>
                <th>@Localizer["lbHotelLocation"]</th>
                <th>@Localizer["lbPackageAction"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var packageViewModel in Model)
            {
                <tr>
                    <td>@packageViewModel.Package.PackageName</td>
                    <td>@packageViewModel.Package.StartDate.ToString("yyyy-MM-dd")</td>
                    <td>@packageViewModel.Package.EndDate.ToString("yyyy-MM-dd")</td>
                    <td>@packageViewModel.Package.AdultPrice</td>
                    <td>@packageViewModel.Package.KidPrice</td>
                    <td>
                        @if (currentCulture == "ar")
                        {
                            @packageViewModel.Hotel?.HotelNameFL
                        }
                        else
                        {
                            @packageViewModel.Hotel?.HotelNameSL
                        }
                    </td>
                    <td>@(packageViewModel.Hotel?.HotelLocation)</td>
                    <td>
                        <!-- Edit button -->
                        <div class="btn-group" role="group" aria-label="Actions">
                            <a href="@Url.Action("Edit", "Packages", new { id = packageViewModel.Package.PackageId })" class="btn btn-primary btn-sm mr-2">@Localizer["lbbtnEdit"]</a>
                            <form id="deleteForm-@packageViewModel.Package.PackageId" asp-action="Delete" asp-controller="Packages" method="post">
                                <input type="hidden" name="id" value="@packageViewModel.Package.PackageId" />
                                <button type="button" class="btn btn-danger btn-sm" onclick="confirmDeletePackage('@packageViewModel.Package.PackageId')">@Localizer["lbbtnDelete"]</button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
<script>
    function confirmDeletePackage(PackageId) {
        Swal.fire({
            title: '@Localizer["lbAreyousure"]',
            text: "@Localizer["lbCanback"]",
            icon: 'warning',
            showCancelButton: true,
            cancelButtonText: '@Localizer["lbcancelButtonText"]',
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: '@Localizer["lbYesdelete"]'
        }).then((result) => {
            if (result.isConfirmed) {
                // If confirmed, submit the form
                document.getElementById('deleteForm-' + PackageId).submit();
            }
        });
    }
</script>
